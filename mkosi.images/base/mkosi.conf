
[Output]
Format=directory
ImageVersion=
ManifestFormat=json


[Content]
Bootable=no
CleanPackageMetadata=no
WithDocs=yes
# Sysext base requirements
# Keep package metadata so sysexts can properly extend
Packages=erofs-utils
  zstd
  btrfs-progs
  ca-certificates
  curl
  dracut
  dosfstools
  e2fsprogs
  fdisk
  git
  git-lfs
  gpg
  iproute2
  iputils-ping
  network-manager
  rsync
  skopeo
  sudo
  tpm2-tools
  xfsprogs
  zstd
  cryptsetup
  libfido2-1
  libfido2-dev
  libtss2-esys-3.0.2-0
  libp11-kit0
  systemd
  systemd-boot


# kernel and modules
Packages=linux-image-amd64/trixie-backports

# Plymouth
Packages=plymouth
         plymouth-themes
         plymouth-label

# GNOME Desktop
Packages=gnome-core
         tuned
         tuned-ppd
         switcheroo-control
         ptyxis
         pipewire
         dbus-broker
         mesa-va-drivers


# Distrobox / Containers
Packages=podman
         distrobox
         systemd-container

# Flatpak
Packages=flatpak
         curl

# Docker (from docker.com repo in mkosi.sandbox)
Packages=docker-ce
         docker-ce-cli
         containerd.io
         docker-buildx-plugin
         docker-compose-plugin

# Incus (from Zabbly repo in mkosi.sandbox)
Packages=incus
         incus-extra
         incus-ui-canonical
         dnsmasq-base
         ovmf
         qemu-kvm
         qemu-utils
         qemu-system-gui
         qemu-system-modules-spice
         ipxe-qemu
         genisoimage
         virt-viewer

# GNOME Customization
Packages=gnome-shell-extension-appindicator

# Locales and keyboard
Packages=locales
         keyboard-configuration

# NetworkManager
Packages=network-manager
         network-manager-applet
         iwd

# Shell alternatives
Packages=fish
         zsh

# Utilities
Packages=vim
         netcat-traditional
         openssh-server
         cifs-utils
         wget

# Build tools
Packages=build-essential

# Keyrings for mkosi builds
Packages=ubuntu-keyring
         debian-archive-keyring

# Mesa/Graphics from backports
Packages=mesa-vulkan-drivers



# Packages to remove after installation
RemovePackages=wpasupplicant
               gnome-initial-setup
               gnome-tour
               gnome-session-xsession
               baobab
               evince
               evolution
               firefox-esr
               gnome-calculator
               gnome-calendar
               gnome-characters
               gnome-clocks
               gnome-connections
               gnome-contacts
               gnome-font-viewer
               gnome-logs
               gnome-maps
               gnome-shell-extension-manager
               gnome-snapshot
               gnome-software
               gnome-system-monitor
               gnome-text-editor
               gnome-weather
               nm-connection-editor
               simple-scan
               loupe
               papers
               totem
               yelp
               grub-efi-amd64-signed
