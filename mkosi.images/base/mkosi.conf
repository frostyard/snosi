
[Output]
Format=directory
ImageVersion=
ManifestFormat=json


[Content]
Bootable=no
CleanPackageMetadata=no
WithDocs=yes
# Sysext base requirements
# Keep package metadata so sysexts can properly extend
Packages=erofs-utils
         zstd
         btrfs-progs
         ca-certificates
         curl
         dracut
         dosfstools
         e2fsprogs
         fdisk
         git
         git-lfs
         gpg
         iproute2
         iputils-ping
         network-manager
         rsync
         skopeo
         sudo
         tpm2-tools
         xfsprogs
         zstd
         systemd-cryptsetup
         libfido2-1
         libfido2-dev
         libtss2-esys-3.0.2-0
         libp11-kit0
         systemd
         systemd-boot
         kmod
         lvm2
         frostyard-nbc
         frostyard-chairlift
         snow-first-setup
         efibootmgr
         shim-signed


# kernel and modules
Packages=linux-image-amd64/trixie-backports
  atmel-firmware
  bluez-firmware
  dahdi-firmware-nonfree
  intel-media-va-driver-non-free
  firmware-linux-free
  firmware-linux-nonfree/trixie-backports
  firmware-linux/trixie-backports
  firmware-amd-graphics/trixie-backports
  firmware-atheros/trixie-backports
  firmware-bnx2/trixie-backports
  firmware-bnx2x/trixie-backports
  firmware-brcm80211/trixie-backports
  firmware-cavium/trixie-backports
  firmware-cirrus/trixie-backports
  firmware-intel-graphics/trixie-backports
  firmware-intel-misc/trixie-backports
  firmware-intel-sound/trixie-backports
  firmware-iwlwifi/trixie-backports
  firmware-libertas/trixie-backports
  firmware-linux-nonfree/trixie-backports
  firmware-linux/trixie-backports
  firmware-marvell-prestera/trixie-backports
  firmware-mediatek/trixie-backports
  firmware-misc-nonfree/trixie-backports
  firmware-myricom/trixie-backports
  firmware-netronome/trixie-backports
  firmware-netxen/trixie-backports
  firmware-nvidia-graphics/trixie-backports
  firmware-qlogic/trixie-backports
  firmware-realtek/trixie-backports
  firmware-siano/trixie-backports
  libegl-mesa0/trixie-backports
  libgbm1/trixie-backports
  libgl1-mesa-dri/trixie-backports
  libglx-mesa0/trixie-backports

  linux-image-6.17.13+deb13-amd64/trixie-backports
  linux-image-amd64/trixie-backports
  mesa-libgallium/trixie-backports
  mesa-va-drivers/trixie-backports
  mesa-vdpau-drivers/trixie-backports
  mesa-vulkan-drivers/trixie-backports


# Plymouth
Packages=plymouth
         plymouth-themes
         plymouth-label

# GNOME Desktop
Packages=gnome-core
         tuned
         tuned-ppd
         switcheroo-control
         ptyxis
         pipewire
         dbus-broker
         mesa-va-drivers


# Distrobox / Containers
Packages=podman
         distrobox
         systemd-container

# Flatpak
Packages=flatpak
         curl

# Docker (from docker.com repo in mkosi.sandbox)
Packages=docker-ce
         docker-ce-cli
         containerd.io
         docker-buildx-plugin
         docker-compose-plugin

# Incus (from Zabbly repo in mkosi.sandbox)
Packages=incus
         incus-extra
         incus-ui-canonical
         dnsmasq-base
         ovmf
         qemu-kvm
         qemu-utils
         qemu-system-gui
         qemu-system-modules-spice
         ipxe-qemu
         genisoimage
         virt-viewer

# GNOME Customization
Packages=gnome-shell-extension-appindicator

# Locales and keyboard
Packages=locales
         keyboard-configuration

# NetworkManager
Packages=network-manager
         network-manager-applet
         iwd

# Shell alternatives
Packages=fish
         zsh

# Utilities
Packages=vim
         netcat-traditional
         openssh-server
         cifs-utils
         wget

# Build tools
Packages=build-essential

# Keyrings for mkosi builds
Packages=ubuntu-keyring
         debian-archive-keyring

# Mesa/Graphics from backports
Packages=mesa-vulkan-drivers

# ALSA / Audio
Packages=alsa-topology-conf
         alsa-ucm-conf

# Microcode
Packages=amd64-microcode
         intel-microcode
         iucode-tool

# Additional firmware
Packages=firmware-ast
         firmware-ath9k-htc
         firmware-carl9170
         firmware-sof-signed
         firmware-zd1211

# Printing (CUPS)
Packages=cups
         cups-browsed
         cups-client
         cups-core-drivers
         cups-daemon
         cups-filters
         cups-filters-core-drivers
         cups-ipp-utils
         cups-pk-helper
         cups-ppdc
         cups-server-common
         ipp-usb

# Container extras
Packages=aardvark-dns
         buildah
         catatonit
         containernetworking-plugins
         containers-storage
         criu
         crun
         fuse-overlayfs
         slirp4netns
         passt

# GNOME extras
Packages=gnome-backgrounds
         gnome-browser-connector
         gnome-disk-utility
         gnome-keyring-pkcs11
         gnome-remote-desktop
         gnome-user-share
         geoclue-2.0
         malcontent
         malcontent-gui

# Fonts
Packages=fonts-dejavu
         fonts-dejavu-extra
         fonts-droid-fallback
         fonts-noto-color-emoji
         fonts-noto-mono

# IBus input method
Packages=ibus
         ibus-gtk3
         ibus-gtk4
         im-config

# GStreamer plugins
Packages=gstreamer1.0-gtk4
         gstreamer1.0-libav
         gstreamer1.0-libcamera
         gstreamer1.0-plugins-ugly

# Firmware update
Packages=fwupd
         fwupd-amd64-signed

# System utilities
Packages=jq
         less
         file
         hdparm
         kbd
         bc
         bolt
         iio-sensor-proxy

# initramfs
Packages=klibc-utils
         kpartx

# Avahi/mDNS
Packages=avahi-daemon

# X.org / Xserver
Packages=xserver-xorg
         xserver-xorg-core
         xserver-xorg-input-libinput
         xserver-xorg-input-wacom
         xserver-xorg-video-amdgpu
         xserver-xorg-video-ati
         xserver-xorg-video-intel
         xserver-xorg-video-nouveau
         xserver-xorg-video-radeon
         xserver-xephyr
         xauth
         xfonts-base

# Rygel media server
Packages=rygel
         rygel-playbin
         rygel-tracker

# Accessibility
Packages=speech-dispatcher-espeak-ng

# Misc
Packages=bash-completion
         appstream
         gnupg
         pcscd
         rtkit
         low-memory-monitor
         wireless-regdb
         usb-modeswitch
         usb-modeswitch-data
         usbmuxd
         sane-utils
         sane-airscan
         exfatprogs
         ntfs-3g
         unzip
         util-linux

# diffoscope diffs
Packages=apt
         arch-test
         aspell
         aspell-en
         busybox
         console-setup
         console-setup-linux
         cracklib-runtime
         debootstrap
         distro-info
         distro-info-data
         dns-root-data
         docbook-xml
         docker-ce-rootless-extras
         e2fsprogs-l10n
         enchant-2
         evince-common
         evolution-ews-core
         fakeroot
         cryptsetup
         cryptsetup-bin
         folks-common
         gir1.2-geocodeglib-2.0
         gir1.2-json-1.0
         gir1.2-peas-1.0
         gir1.2-rest-1.0
         gir1.2-shumate-1.0
         gir1.2-totem-1.0
         gir1.2-totemplparser-1.0
         gir1.2-xdp-1.0
         glycin-loaders
         gnome-icon-theme
         gnome-software-common
         gnupg-utils
         gpgv
         gpg-wks-client
         grilo-plugins-0.3
         grub2-common
         grub-common
         grub-efi-amd64
         grub-efi-amd64-bin
         grub-efi-amd64-signed
         gstreamer1.0-packagekit
         gvfs-fuse
         hunspell-en-us
         ibus-gtk
         ibverbs-providers
         imagemagick-7-common
         keyutils
         krb5-locales
         libaacs0
         libalgorithm-diff-perl
         libalgorithm-diff-xs-perl
         libalgorithm-merge-perl
         libatk-adaptor
         libauthen-sasl-perl
         libbabeltrace1
         libbdplus0
         libblkio1
         libcairomm-1.16-1
         libcamera-ipa
         libcanberra-gtk3-module
         libclone-perl
         libcpupower1
         libcriu2
         libdata-dump-perl
         libdebuginfod1t64
         libdebuginfod-common
         libdecor-0-plugin-1-gtk
         libdmapsharing-4.0-3t64
         libedataserverui4-1.0-0t64
         libeditorconfig0
         libencode-locale-perl
         libevent-2.1-7t64
         libfile-basedir-perl
         libfile-desktopentry-perl
         libfile-fcntllock-perl
         libfile-listing-perl
         libfile-mimeinfo-perl
         libfolks26
         libfolks-eds26
         libfont-afm-perl
         libfreerdp-client3-3
         libgdk-pixbuf2.0-bin
         libgfapi0
         libgfrpc0
         libgfxdr0
         libglibmm-2.68-1t64
         libglusterfs0
         libgom-1.0-0t64
         libgpg-error-l10n
         libgphoto2-l10n
         libgrilo-0.3-0
         libgtk-3-bin
         libgtk-4-bin
         libgtkmm-4.0-0
         libgtksourceview-5-0
         libgtksourceview-5-common
         libheif-plugin-aomenc
         libheif-plugin-x265
         libhivex0
         libhtml-format-perl
         libhtml-form-perl
         libhtml-parser-perl
         libhtml-tagset-perl
         libhtml-tree-perl
         libhttp-cookies-perl
         libhttp-daemon-perl
         libhttp-date-perl
         libhttp-message-perl
         libhttp-negotiate-perl
         libio-compress-brotli-perl
         libio-html-perl
         libio-socket-ssl-perl
         libio-stringy-perl
         libipc-system-simple-perl
         libiscsi7
         libjavascriptcoregtk-6.0-1
         libjxr0t64
         libjxr-tools
         libldap-common
         liblouisutdml9t64
         liblouisutdml-bin
         liblouisutdml-data
         liblqr-1-0
         liblwp-mediatypes-perl
         liblwp-protocol-https-perl
         libmagickcore-7.q16-10
         libmagickcore-7.q16-10-extra
         libmagickwand-7.q16-10
         libmailtools-perl
         libmbim-utils
         libmtp-runtime
         libnet-dbus-perl
         libnet-http-perl
         libnet-smtp-ssl-perl
         libnet-ssleay-perl
         libnma0
         libnss-mdns
         libnss-myhostname
         libnss-mymachines
         liboauth0
         libopencsd1
         libpackagekit-glib2-18
         libpam-cap
         libpangomm-2.48-1t64
         libpaper-utils
         libpcap0.8t64
         libpeas-1.0-0
         libpeas-common
         libpipewire-0.3-common
         libportal-gtk3-1
         libqmi-utils
         libraw23t64
         libsasl2-modules
         libshumate-1.0-1
         libshumate-common
         libsigc++-3.0-0
         libspa-0.2-libcamera
         libspelling-1-2
         libspelling-common
         libtie-ixhash-perl
         libtimedate-perl
         libtotem0
         libtraceevent1
         libtry-tiny-perl
         liburi-perl
         libvdpau-va-gl1
         libvirt-glib-1.0-data
         libvirt-l10n
         libwebkitgtk-6.0-4
         libwim15t64
         libwin-hivex-perl
         libwmflite-0.2-7
         libwww-perl
         libwww-robotrules-perl
         libx11-protocol-perl
         libxatracker2
         libxml-parser-perl
         libxml-twig-perl
         libxml-xpathengine-perl
         libxxf86dga1
         libyelp0
         linux-cpupower
         linux-perf
         linux-sysctl-defaults
         locales-all
         login
         lsb-release
         luit
         lynx
         lynx-common
         mailcap
         manpages
         manpages-dev
         mdadm
         mobile-broadband-provider-info
         modemmanager
         ncurses-term
         network-manager-l10n
         os-prober
         packagekit
         packagekit-tools
         perl-openssl-defaults
         perl-tk
         pigz
         pinentry-curses
         pocketsphinx-en-us
         powermgmt-base
         ppp
         publicsuffix
         python3-distro
         python3-protobuf
         python3-pycriu
         python3-smbc
         qemu-block-extra
         realmd
         sound-icons
         sshfs
         systemd-timesyncd
         thin-provisioning-tools
         totem-common
         vdpau-driver-all
         wamerican
         wimtools
         x11-utils
         xbrlapi
         xcvt
         xsel
         xserver-xorg-input-all
         xserver-xorg-legacy
         xserver-xorg-video-all
         xserver-xorg-video-fbdev
         xserver-xorg-video-qxl
         xserver-xorg-video-vesa
         xserver-xorg-video-vmware
         xxd
         yelp-xsl
# Packages to remove after installation
RemovePackages=wpasupplicant
               gnome-initial-setup
               gnome-tour
               gnome-session-xsession
               baobab
               evince
               evolution
               firefox-esr
               gnome-calculator
               gnome-calendar
               gnome-characters
               gnome-clocks
               gnome-connections
               gnome-contacts
               gnome-font-viewer
               gnome-logs
               gnome-maps
               gnome-shell-extension-manager
               gnome-snapshot
               gnome-software
               gnome-system-monitor
               gnome-text-editor
               gnome-weather
               nm-connection-editor
               simple-scan
               loupe
               papers
               totem
               yelp
